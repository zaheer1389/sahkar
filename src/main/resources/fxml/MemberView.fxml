<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox spacing="10" style="-fx-background-color: #f1f3f5;" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.badargadh.sahkar.controller.MemberController">
    <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>

    <HBox alignment="CENTER_LEFT" spacing="20">
        <Label text="Member Directory" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
        
        <TextField fx:id="txtSearch" promptText="ðŸ” Search name or number..." 
                   prefWidth="250" prefHeight="28" style="-fx-font-size: 12; -fx-background-radius: 5;"/>
        
        <Button text="Refresh Member List" onAction="#loadDynamicData" style="-fx-font-size: 11;"/>
        
        <Button onAction="#handleExportPdf" text="Export PDF" 
        	style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" />
        
        <Region HBox.hgrow="ALWAYS" />
        
        <VBox alignment="CENTER_RIGHT" style="-fx-background-color: #2c3e50; -fx-padding: 10 20; -fx-background-radius: 10;">
            <Label text="TOTAL MEMBERS" style="-fx-text-fill: #bdc3c7; -fx-font-size: 10; -fx-font-weight: bold;"/>
            <Label fx:id="lblTotalMembers" text="0" style="-fx-text-fill: #f1c40f; -fx-font-size: 20; -fx-font-weight: bold;"/>
        </VBox>
                
    </HBox>

    <HBox spacing="10" VBox.vgrow="ALWAYS">
        <VBox HBox.hgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 5; -fx-border-color: #dee2e6; -fx-padding: 5;">
            <TableView fx:id="tblMembers" VBox.vgrow="ALWAYS" styleClass="compact-table">
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                </columnResizePolicy>
                <columns>
                    <TableColumn fx:id="colMemberNo" text="Member No" prefWidth="50"/>
                    <TableColumn fx:id="colFullName" text="Member Name" prefWidth="250"/>
                    <TableColumn fx:id="colTotalFees" text="Total Fees" prefWidth="80"/>
                    <TableColumn fx:id="colPendingLoan" text="Pending Loan Amount" prefWidth="80"/>
                    <TableColumn fx:id="colEmi" text="EMI Amount" prefWidth="100"/> 
                    <TableColumn fx:id="colCancelledDate" text="Cancelled Date" prefWidth="100"/>                 
                    <TableColumn fx:id="colStatus" text="Status" prefWidth="100"/>  
                    <TableColumn fx:id="colAction" text="Actions" prefWidth="180.0" />                  
                </columns>
            </TableView>
        </VBox>

        <VBox prefWidth="300" spacing="10" style="-fx-background-color: white; -fx-background-radius: 5; -fx-border-color: #dee2e6; -fx-padding: 12;">
            <Label text="Member Details" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
            <Separator/>
            
            <VBox spacing="3">
                <Label text="Member No" styleClass="small-label"/>
                <TextField fx:id="txtMemberNo" styleClass="compact-input" style="-fx-background-color: #f8f9fa;"/>
            </VBox>

            <VBox spacing="3">
                <Label text="First Name" styleClass="small-label"/>
                <TextField fx:id="txtFirstName" styleClass="compact-input"/>
            </VBox>
            
            <VBox spacing="3">
                <Label text="Middle Name" styleClass="small-label"/>
                <TextField fx:id="txtMiddleName" styleClass="compact-input"/>
            </VBox>
            
            <VBox spacing="3">
                <Label text="Last Name" styleClass="small-label"/>
                <TextField fx:id="txtLastName" styleClass="compact-input"/>
            </VBox>

			<VBox spacing="3">
                <Label text="Village" styleClass="small-label"/>
                <ComboBox fx:id="cmbVillage" maxWidth="Infinity" styleClass="compact-input"/>
            </VBox>
            
            <Region VBox.vgrow="NEVER"/>
            
            <HBox spacing="10">
                <Button text="SAVE" onAction="#handleSave" HBox.hgrow="ALWAYS" maxWidth="Infinity" prefHeight="35"
                        style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>
                
                <Button text="CLEAR" onAction="#handleClear" HBox.hgrow="ALWAYS" maxWidth="Infinity" prefHeight="35"
                        style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"/>
            </HBox>
        </VBox>
    </HBox>
</VBox>