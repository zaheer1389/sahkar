<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox spacing="20" style="-fx-padding: 25; -fx-background-color: #f1f3f5;" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.badargadh.sahkar.controller.LoanPlanningController">
    <children>
    	<!--
        <HBox alignment="CENTER_LEFT" spacing="15">
            <children>
                <VBox>
                    <Label text="Loan Draw Planning" style="-fx-font-size: 22; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
                    <Label fx:id="lblMonthInfo" text="Financial Period: Loading..." style="-fx-text-fill: #7f8c8d;" />
                </VBox>
                <Region HBox.hgrow="ALWAYS" />
                <Button onAction="#refresh" text="ðŸ”„ Recalculate Liquidity" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20; -fx-cursor: hand;" />
            </children>
        </HBox>
        -->

        <HBox spacing="20" VBox.vgrow="ALWAYS">
            <children>
                <VBox spacing="15" prefWidth="500">
                    <children>
                        <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #dee2e6;">
                            <children>
                                <Label text="ESTIMATED TOTAL INCOME" style="-fx-font-weight: bold; -fx-text-fill: #34495e; -fx-font-size: 14;" />
                                <Label fx:id="lblNetAvailable" text="â‚¹ 0.00" style="-fx-font-size: 36; -fx-font-weight: bold; -fx-text-fill: #27ae60;" />
                                
                                <Separator />
                                
                                <GridPane vgap="12" hgap="10">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="SOMETIMES" minWidth="250" />
                                        <ColumnConstraints hgrow="SOMETIMES" minWidth="120" halignment="RIGHT" />
                                    </columnConstraints>
                                    <children>
                                        <Label text="1. Opening Balance" GridPane.rowIndex="0" />
                                        <Label fx:id="lblOpeningBal" text="â‚¹ 0" GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-font-weight: bold;" />

                                        <Label text="2. Expected Monthly Fees (Active Members)" GridPane.rowIndex="1" />
                                        <Label fx:id="lblExpectedFees" text="â‚¹ 0" GridPane.rowIndex="1" GridPane.columnIndex="1" style="-fx-font-weight: bold;" />

                                        <Label text="3. Recurring EMIs (Old Loans Only)" GridPane.rowIndex="2" />
                                        <Label fx:id="lblExpectedEmi" text="â‚¹ 0" GridPane.rowIndex="2" GridPane.columnIndex="1" style="-fx-font-weight: bold;" />

										<Label text="4. Fresh Loan EMIs (Estimated @ â‚¹200)" GridPane.rowIndex="3" />
                                        <Label fx:id="lblFreshLoansVirtualEmi" text="â‚¹ 0" GridPane.rowIndex="3" GridPane.columnIndex="1" style="-fx-font-weight: bold;" />

                                        <Label text="5. Less: Eligible Member Refunds" GridPane.rowIndex="4" style="-fx-text-fill: #e74c3c;" />
                                        <Label fx:id="lblRefunds" text="â‚¹ 0" GridPane.rowIndex="4" GridPane.columnIndex="1" style="-fx-font-weight: bold; -fx-text-fill: #e74c3c;" />
                                    </children>
                                </GridPane>
                            </children>
                        </VBox>

                        <VBox spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 30; -fx-background-radius: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.4), 10, 0, 0, 10);">
						    <children>
						        <Label text="DRAW DECISION SUPPORT" style="-fx-text-fill: #bdc3c7; -fx-font-weight: bold; -fx-font-size: 20; -fx-letter-spacing: 2;" />
						        <HBox alignment="CENTER_LEFT" spacing="10">
						            <children>
						                <VBox alignment="CENTER">
						                    <children>
						                        <Label fx:id="lblPossible50k" text="0" 
						                               style="-fx-font-size: 100; -fx-font-weight: bold; -fx-text-fill: #f1c40f; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 2, 0.5, 2, 2);" />
						                        <Label text="LOANS CAN BE OPEN" style="-fx-text-fill: #f1c40f; -fx-font-weight: bold; -fx-font-size: 18ad;" />
						                    </children>
						                </VBox>
						            </children>
						        </HBox>
						        <!--
						        <HBox style="-fx-background-color: rgba(255,255,255,0.1); -fx-padding: 10; -fx-background-radius: 5;">
						            <Label text="Based on â‚¹ 50,000 per loan" style="-fx-text-fill: #bdc3c7; -fx-font-size: 12; -fx-font-style: italic;" />
						        </HBox>-->
						    </children>
						</VBox>
                    </children>
                </VBox>

				<!--
                <VBox spacing="15" HBox.hgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #dee2e6;">
                    <children>
                        <Label text="Projection Breakup" style="-fx-font-weight: bold; -fx-font-size: 16; -fx-text-fill: #2c3e50;" />
                        <TableView fx:id="tblProjection" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colCategory" text="Income/Deduction Source" prefWidth="250" />
                                <TableColumn fx:id="colAmount" text="Estimated Amount" prefWidth="150" />
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                            </columnResizePolicy>
                        </TableView>
                        <Label text="* Note: Current month's granted loans are excluded from EMI projections." style="-fx-font-style: italic; -fx-font-size: 11; -fx-text-fill: #95a5a6;" />
                    </children>
                </VBox>
                -->
                
                <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: #f1f3f5;" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.badargadh.sahkar.controller.LoanPlanningController">
				    <children>
				        <HBox alignment="CENTER_LEFT" spacing="15">
				             <VBox>
				                <Label text="Loan Draw Planning" style="-fx-font-size: 22; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
				                <Label fx:id="lblMonthInfo" text="Financial Period: Loading..." style="-fx-text-fill: #7f8c8d;" />
				            </VBox>
				            <Region HBox.hgrow="ALWAYS" />
				            <Button onAction="#refresh" text="ðŸ”„ Recalculate Liquidity" style="-fx-background-color: #3498db; -fx-text-fill: white;" />
				        </HBox>
				
				        <VBox spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 25; -fx-background-radius: 10;">
				            <Label text="MAXIMUM MEMBERS ELIGIBLE FOR CURRENT DRAW" style="-fx-text-fill: #bdc3c7; -fx-font-weight: bold;" />
				            <HBox alignment="CENTER_LEFT" spacing="30">
				                <Label fx:id="lblPossible50k" text="0" style="-fx-font-size: 80; -fx-font-weight: bold; -fx-text-fill: #f1c40f;" />
				                <VBox alignment="CENTER_LEFT">
				                    <Label text="Based on available funds" style="-fx-text-fill: white;" />
				                    <Button onAction="#executeComputerizedDraw" text="ðŸš€ RUN COMPUTERIZED DRAW" 
				                            style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14;" />
				                </VBox>
				            </HBox>
				        </VBox>
				
				        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10; -fx-border-color: #3498db; -fx-border-width: 2;" VBox.vgrow="ALWAYS">
				            <children>
				                <Label text="ðŸŽ¯ SELECTED MEMBERS (Based on Waiting Duration)" style="-fx-font-weight: bold; -fx-text-fill: #2980b9; -fx-font-size: 16;" />
				                <TableView fx:id="tblDrawResults" VBox.vgrow="ALWAYS">
				                    <columns>
				                        <TableColumn fx:id="colRank" text="Rank" prefWidth="60" />
				                        <TableColumn fx:id="colDrawMemNo" text="M.No" prefWidth="80" />
				                        <TableColumn fx:id="colDrawName" text="Member Name" prefWidth="300" />
				                        <TableColumn fx:id="colLastLoanDate" text="Last Loan Closure" prefWidth="180" />
				                    </columns>
				                    <columnResizePolicy>
				                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
				                    </columnResizePolicy>
				                </TableView>
				            </children>
				        </VBox>
				    </children>
				</VBox>
            </children>
        </HBox>
    </children>
</VBox>